 name: CI

 on:
   push:
   pull_request:

 jobs:
   test:
     runs-on: ubuntu-latest
     steps:
       - uses: actions/checkout@v4

       - uses: actions/setup-python@v5
         with:
           python-version: "3.11"

       - name: Install
         run: |
          python -m pip install --upgrade pip
          python -m pip install -e ".[dev]"

       - name: Format (check)
         run: |
          python -m ruff format --check .

       - name: Lint
         run: |
           make lint

       - name: Typecheck
         run: |
           make typecheck

       - name: Mypy smoke (reveal_type)
         run: |
           make mypy-smoke

       - name: Tests
         run: |
           make test